<%= if @current_account_users && length(@current_account_users)>0 do %>
  <div class="flex items-center py-2">
    <h3 class="text-xs font-bold tracking-wider text-gray-100 px-2 py-1.5 bg-gray-900 rounded text-center uppercase">Select a user</h3>
    <ul class="flex items-center pl-4 ml-4 space-x-3">
      <%= for user <- @current_account_users do %>
        <li class="flex flex-col col-span-1 p-2 text-center transition-colors duration-200 ease-in-out divide-y divide-gray-200 rounded-md group ">
          <%= live_redirect to: Routes.switch_user_path(@socket, :show, user.character.username || "") <> @go do %>
          <div class="flex flex-col items-center flex-1">
            <img class="flex-shrink-0 w-12 h-12 mx-auto mr-1 rounded-full ring-4 ring-white group-hover:ring-pink-600" src="<%= Bonfire.Me.Fake.image(user) %>" alt="">
            <div class="mt-0">
              <%= if Utils.module_exists?(Bonfire.Me.SharedUsers) && e(user, :shared_user, :label, nil) do %>
                <span class="inline-flex items-center px-2 py-1 mt-1 text-sm font-medium leading-5 text-center text-pink-800 bg-pink-100 rounded-md group-hover:text-pink-600">
                  <%= e(user, :shared_user, :label, nil) %>
                </span>
              <% else %>
                <span class="inline-flex items-center text-sm font-medium text-center text-gray-700 group-hover:text-pink-600">
                  @<%= e(user, :character, :username, nil) %>
                </span>
              <% end %>
            </div>
          </div>
          <% end %>
        </li>
      <% end %>
      <li class="flex flex-col col-span-1 text-center divide-y divide-gray-200 group">
        <%= live_redirect to: Routes.create_user_path(@socket, :index) do %>
          <div class="flex flex-col items-center flex-1">
            <div class="w-12 h-12">
              <svg class="text-gray-300 transition-colors duration-200 ease-in-out group-hover:text-pink-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"></path></svg>
            </div>
            <div class="mt-0">
              <span class="inline-flex items-center text-sm font-medium text-center text-gray-700 group-hover:text-pink-600">
                Create a new user
              </span>
            </div>
          </div>
        <% end %>
      </li>
    </ul>
  </div>

<% else %>

  <%= live_redirect to: Routes.create_user_path(@socket, :index) do %>
    <div class="flex flex-col items-center flex-1 py-4">
      <svg class="w-40 h-40 text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path></svg>
      <h3 class="mt-4 text-lg font-medium text-gray-700">Create a user profile</h3>
    </div>
  <% end %>
<% end %>
